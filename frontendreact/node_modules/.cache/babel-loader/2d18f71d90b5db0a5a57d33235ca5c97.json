{"ast":null,"code":"var _jsxFileName = \"/Users/szapeta/Documents/USAC/Compi2/Proyectos/Proyecto2 2/frontendreact/src/components/public/login/Login.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useContext, useState } from \"react\";\nimport { AuthContext } from \"../../../auth/AuthContext\";\nimport { types } from \"../../../types/Types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Login = _ref => {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  const {\n    dispatch\n  } = useContext(AuthContext);\n  const [formusername, setFormusername] = useState(\"\");\n  const [formpass, setFormpass] = useState(\"\");\n\n  const handleLogin = async e => {\n    const lastPath = localStorage.getItem(\"lastPath\") || \"/\";\n    let resp;\n\n    if (types.isProd) {\n      resp = await axios.post(types.apiurl + \"login\", {\n        user: formusername,\n        password: formpass\n      });\n    } else {\n      dispatch({\n        type: types.login,\n        payload: {\n          name: \"sfelipe\",\n          user: \"sfelipe\",\n          rol: types.rolAdmin,\n          iduser: \"1\"\n        }\n      });\n      history.replace(lastPath);\n      return;\n    }\n\n    if (resp.data.length > 0) {\n      let resultUsuario = resp.data[0];\n      let usuario = resultUsuario.user;\n      dispatch({\n        type: types.login,\n        payload: {\n          name: resultUsuario.name,\n          user: usuario,\n          path: resultUsuario.path,\n          iduser: resultUsuario.id\n        }\n      });\n      history.replace(lastPath);\n    } else {\n      alert(\"Error en credenciales\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"ingrese su nombre de usuario\",\n        autoComplete: \"off\",\n        className: \"form-control\",\n        id: \"name\",\n        onChange: event => {\n          setFormusername(event.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        id: \"pass\",\n        onChange: event => {\n          setFormpass(event.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-lg btn-block btn-pink-sherbet fondo-red-crayola\",\n      onClick: handleLogin,\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"JaG879SH9N2OSO0uLEXOIaHcIdw=\");\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/szapeta/Documents/USAC/Compi2/Proyectos/Proyecto2 2/frontendreact/src/components/public/login/Login.js"],"names":["axios","React","useContext","useState","AuthContext","types","Login","history","dispatch","formusername","setFormusername","formpass","setFormpass","handleLogin","e","lastPath","localStorage","getItem","resp","isProd","post","apiurl","user","password","type","login","payload","name","rol","rolAdmin","iduser","replace","data","length","resultUsuario","usuario","path","id","alert","event","target","value"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useContext, useState } from \"react\";\nimport { AuthContext } from \"../../../auth/AuthContext\";\nimport { types } from \"../../../types/Types\";\n\nexport const Login = ({ history }) => {\n    const { dispatch } = useContext(AuthContext);\n\n    const [formusername, setFormusername] = useState(\"\");\n    const [formpass, setFormpass] = useState(\"\");\n\n    const handleLogin = async (e) => {\n\n        const lastPath = localStorage.getItem(\"lastPath\") || \"/\";\n\n        let resp;\n        if(types.isProd){\n            resp = await axios.post(types.apiurl + \"login\", {\n                user: formusername,\n                password: formpass,\n            });\n        }else{\n            dispatch({\n                type: types.login,\n                payload: {\n                    name: \"sfelipe\",\n                    user: \"sfelipe\",\n                    rol: types.rolAdmin,\n                    iduser: \"1\"                \n                },\n            });\n            history.replace(lastPath);\n            return\n        }\n\n    \n        if (resp.data.length > 0) {\n            let resultUsuario = resp.data[0];\n\n            let usuario = resultUsuario.user;\n\n            dispatch({\n                type: types.login,\n                payload: {\n                    name: resultUsuario.name,\n                    user: usuario,\n                    path: resultUsuario.path,\n                    iduser: resultUsuario.id\n                },\n            });\n\n            history.replace(lastPath);\n        } else {\n            alert(\"Error en credenciales\");\n        }\n    };\n    \n    return (\n        <div className=\"container mt-5\">\n            <h1>Login</h1>\n            <hr />\n\n            <div className=\"form-group\">\n                <label>Username</label>\n                <input\n                    type=\"ingrese su nombre de usuario\"\n                    autoComplete=\"off\"\n                    className=\"form-control\"\n                    id=\"name\"\n                    onChange={(event) => {\n                        setFormusername(event.target.value);\n                    }}\n                />\n            </div>\n            <div className=\"form-group\">\n                <label>Password</label>\n                <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    id=\"pass\"\n                    onChange={(event) => {\n                        setFormpass(event.target.value);\n                    }}\n                />\n            </div>\n            <button className=\"btn btn-lg btn-block btn-pink-sherbet fondo-red-crayola\" onClick={handleLogin}>\n                Login\n            </button>\n        </div>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}