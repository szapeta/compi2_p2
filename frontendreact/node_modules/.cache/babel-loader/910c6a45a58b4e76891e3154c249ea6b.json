{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/components/public/login/Login.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useContext, useState } from \"react\";\nimport { AuthContext } from \"../../../auth/AuthContext\";\nimport { types } from \"../../../types/Types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Login = _ref => {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  const {\n    dispatch\n  } = useContext(AuthContext);\n  const [formusername, setFormusername] = useState(\"\");\n  const [formpass, setFormpass] = useState(\"\");\n\n  const handleLogin = async e => {\n    const lastPath = localStorage.getItem(\"lastPath\") || \"/\";\n    let resp;\n\n    if (types.isProd) {\n      resp = await axios.post(types.apiurl + \"/usuarios/login\", {\n        formusername,\n        formpass\n      });\n    } else {\n      dispatch({\n        type: types.login,\n        payload: {\n          name: \"sfelipe\",\n          user: \"sfelipe\",\n          rol: types.rolAdmin,\n          iduser: \"1\"\n        }\n      });\n      history.replace(lastPath);\n      return;\n    }\n\n    if (resp.data.idUsuario > 0) {\n      let resultUsuario = resp.data;\n      dispatch({\n        type: types.login,\n        payload: {\n          rol: types.rolAdmin,\n          user: resultUsuario.user,\n          iduser: resultUsuario.idUsuario\n        }\n      });\n      history.replace(lastPath);\n    } else {\n      alert(\"Error en credenciales\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"ingrese su nombre de usuario\",\n        autoComplete: \"off\",\n        className: \"form-control\",\n        id: \"name\",\n        onChange: event => {\n          setFormusername(event.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        id: \"pass\",\n        onChange: event => {\n          setFormpass(event.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-lg btn-block btn-pink-sherbet fondo-red-crayola\",\n      onClick: handleLogin,\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"JaG879SH9N2OSO0uLEXOIaHcIdw=\");\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/usr/src/app/src/components/public/login/Login.js"],"names":["axios","React","useContext","useState","AuthContext","types","Login","history","dispatch","formusername","setFormusername","formpass","setFormpass","handleLogin","e","lastPath","localStorage","getItem","resp","isProd","post","apiurl","type","login","payload","name","user","rol","rolAdmin","iduser","replace","data","idUsuario","resultUsuario","alert","event","target","value"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useContext, useState } from \"react\";\nimport { AuthContext } from \"../../../auth/AuthContext\";\nimport { types } from \"../../../types/Types\";\n\nexport const Login = ({ history }) => {\n    const { dispatch } = useContext(AuthContext);\n\n    const [formusername, setFormusername] = useState(\"\");\n    const [formpass, setFormpass] = useState(\"\");\n\n    const handleLogin = async (e) => {\n\n        const lastPath = localStorage.getItem(\"lastPath\") || \"/\";\n\n        let resp;\n        if(types.isProd){\n            resp = await axios.post(types.apiurl + \"/usuarios/login\", {\n                formusername,\n                formpass,\n            });\n        }else{\n            dispatch({\n                type: types.login,\n                payload: {\n                    name: \"sfelipe\",\n                    user: \"sfelipe\",\n                    rol: types.rolAdmin,\n                    iduser: \"1\"                \n                },\n            });\n            history.replace(lastPath);\n            return\n        }\n    \n        if (resp.data.idUsuario > 0) {\n            let resultUsuario = resp.data;\n\n            dispatch({\n                type: types.login,\n                payload: {\n                    rol: types.rolAdmin,\n                    user: resultUsuario.user,\n                    iduser: resultUsuario.idUsuario\n                },\n            });\n\n            history.replace(lastPath);\n        } else {\n            alert(\"Error en credenciales\");\n        }\n    };\n    \n    return (\n        <div className=\"container mt-5\">\n            <h1>Login</h1>\n            <hr />\n\n            <div className=\"form-group\">\n                <label>Username</label>\n                <input\n                    type=\"ingrese su nombre de usuario\"\n                    autoComplete=\"off\"\n                    className=\"form-control\"\n                    id=\"name\"\n                    onChange={(event) => {\n                        setFormusername(event.target.value);\n                    }}\n                />\n            </div>\n            <div className=\"form-group\">\n                <label>Password</label>\n                <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    id=\"pass\"\n                    onChange={(event) => {\n                        setFormpass(event.target.value);\n                    }}\n                />\n            </div>\n            <button className=\"btn btn-lg btn-block btn-pink-sherbet fondo-red-crayola\" onClick={handleLogin}>\n                Login\n            </button>\n        </div>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}